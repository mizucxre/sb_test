{% extends "base.html" %}

{% block page_title %}–ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
<div x-data="dashboard()" class="space-y-4 lg:space-y-6">
    <!-- Loading skeleton -->
    <template x-if="loading">
        <div class="space-y-4 lg:space-y-6">
            <!-- Stats skeleton -->
            <div class="responsive-grid gap-3 lg:gap-6">
                <div class="glass-effect rounded-2xl p-4 lg:p-6 animate-pulse">
                    <div class="h-3 bg-white/10 rounded w-1/2 mb-3 lg:mb-4"></div>
                    <div class="h-6 lg:h-8 bg-white/10 rounded w-3/4"></div>
                </div>
                <div class="glass-effect rounded-2xl p-4 lg:p-6 animate-pulse">
                    <div class="h-3 bg-white/10 rounded w-1/2 mb-3 lg:mb-4"></div>
                    <div class="h-6 lg:h-8 bg-white/10 rounded w-3/4"></div>
                </div>
                <div class="glass-effect rounded-2xl p-4 lg:p-6 animate-pulse">
                    <div class="h-3 bg-white/10 rounded w-1/2 mb-3 lg:mb-4"></div>
                    <div class="h-6 lg:h-8 bg-white/10 rounded w-3/4"></div>
                </div>
            </div>
        </div>
    </template>

    <!-- Content -->
    <div x-show="!loading" class="space-y-4 lg:space-y-6 slide-up">
        <!-- Stats Cards removed as requested -->

        <!-- Quick Actions and Tutorial -->
        <div class="responsive-grid gap-3 lg:gap-6">
            <!-- Quick Actions Card -->
            <div class="glass-effect rounded-2xl p-4 lg:p-6">
                <h3 class="text-base lg:text-lg font-semibold mb-3 lg:mb-4">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                <div class="space-y-2 lg:space-y-3">
                    <a href="/admin/orders/new" 
                       class="flex items-center space-x-3 p-3 lg:p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 transition-all duration-200 group"
                       data-touch-target>
                        <div class="w-8 h-8 lg:w-10 lg:h-10 bg-blue-500/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-200">
                            <i class="fas fa-plus text-blue-400 text-sm lg:text-base"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="font-medium text-sm lg:text-base truncate">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</p>
                            <p class="text-xs lg:text-sm text-gray-400 truncate">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ä–∞–∑–±–æ—Ä</p>
                        </div>
                    </a>

                    <a href="/admin/orders" 
                       class="flex items-center space-x-3 p-3 lg:p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 transition-all duration-200 group"
                       data-touch-target>
                        <div class="w-8 h-8 lg:w-10 lg:h-10 bg-green-500/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-200">
                            <i class="fas fa-edit text-green-400 text-sm lg:text-base"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="font-medium text-sm lg:text-base truncate">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏</p>
                            <p class="text-xs lg:text-sm text-gray-400 truncate">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å—ã</p>
                        </div>
                    </a>

                    <a href="/admin/broadcast" 
                       class="flex items-center space-x-3 p-3 lg:p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 transition-all duration-200 group"
                       data-touch-target>
                        <div class="w-8 h-8 lg:w-10 lg:h-10 bg-purple-500/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-200">
                            <i class="fas fa-bullhorn text-purple-400 text-sm lg:text-base"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="font-medium text-sm lg:text-base truncate">–°–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É</p>
                            <p class="text-xs lg:text-sm text-gray-400 truncate">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</p>
                        </div>
                    </a>

                    <a href="/admin/reports" 
                       class="flex items-center space-x-3 p-3 lg:p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 transition-all duration-200 group"
                       data-touch-target>
                        <div class="w-8 h-8 lg:w-10 lg:h-10 bg-orange-500/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-200">
                            <i class="fas fa-chart-bar text-orange-400 text-sm lg:text-base"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="font-medium text-sm lg:text-base truncate">–ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–æ–≤</p>
                            <p class="text-xs lg:text-sm text-gray-400 truncate">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</p>
                        </div>
                    </a>
                </div>
            </div>

            <!-- Tutorial -->
            <div class="glass-effect rounded-2xl p-4 lg:p-6">
                <h3 class="text-base lg:text-lg font-semibold mb-3 lg:mb-4">–¢—É—Ç–æ—Ä–∏–∞–ª –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é</h3>
                <div class="space-y-3 lg:space-y-4 text-sm">
                    <div class="flex items-start space-x-3">
                        <div class="w-6 h-6 bg-blue-500/20 rounded-full flex items-center justify-center mt-0.5">
                            <span class="text-blue-400 text-xs font-bold">1</span>
                        </div>
                        <div>
                            <span class="font-medium">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤:</span>
                            <p class="text-gray-400">–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∑–∞–∫–∞–∑—ã –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏–∑ Excel</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start space-x-3">
                        <div class="w-6 h-6 bg-green-500/20 rounded-full flex items-center justify-center mt-0.5">
                            <span class="text-green-400 text-xs font-bold">2</span>
                        </div>
                        <div>
                            <span class="font-medium">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏:</span>
                            <p class="text-gray-400">–û–±–Ω–æ–≤–ª—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤ –ø–æ –º–µ—Ä–µ –∏—Ö –¥–≤–∏–∂–µ–Ω–∏—è</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start space-x-3">
                        <div class="w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center mt-0.5">
                            <span class="text-purple-400 text-xs font-bold">3</span>
                        </div>
                        <div>
                            <span class="font-medium">–†–∞–±–æ—Ç–∞ —Å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏:</span>
                            <p class="text-gray-400">–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –æ–ø–ª–∞—Ç—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start space-x-3">
                        <div class="w-6 h-6 bg-orange-500/20 rounded-full flex items-center justify-center mt-0.5">
                            <span class="text-orange-400 text-xs font-bold">4</span>
                        </div>
                        <div>
                            <span class="font-medium">–ê–¥—Ä–µ—Å–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤:</span>
                            <p class="text-gray-400">–•—Ä–∞–Ω–∏—Ç–µ –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ –∞–¥—Ä–µ—Å–∞–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏</p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-4 lg:mt-6 pt-3 lg:pt-4 border-t border-white/10">
                    <div class="text-xs lg:text-sm text-gray-400">
                        <p>üí° <span class="font-medium">–°–æ–≤–µ—Ç:</span> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –Ω—É–∂–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('alpine:init', () => {
    Alpine.data('dashboard', () => ({
        loading: true,
        stats: {},
        
        init() {
            this.loadData();
        },
        
        async loadData() {
            try {
                const response = await fetch('/admin/api/stats');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const statsData = await response.json();
                this.stats = statsData;
                
            } catch (error) {
                console.error('Error loading dashboard data:', error);
                this.showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: ' + error.message);
            } finally {
                this.loading = false;
            }
        },
        
        showError(message) {
            console.error('Dashboard error:', message);
            if (window.Alpine && Alpine.$data && Alpine.$data.pageUtils) {
                Alpine.$data.pageUtils.showNotification(message, 'error');
            }
        }
    }));
});
</script>
{% endblock %}
